<%- include('components/clientHeader', { pageTitle: 'Client Dashboard' }) %>

    <div style="width: 100%; display: flex;">
        <div class="status-section" style="flex: 1; padding: 20px;">
            <h2>Status of Previous Tickets</h2>
            <ul>
                <% if (previousTickets.length> 0) { %>
                    <% previousTickets.forEach(ticket=> { %>
                        <li>
                            <p>Ticket ID: <%= ticket.ticketId %>
                            </p>
                            <p>Category: <%= ticket.categories %>
                            </p>
                            <p>Status: <%= ticket.status %>
                            </p>
                            <p>Solution: <%= ticket.solution || 'Not available' %>
                            </p>
                        </li>
                        <% }); %>
                            <% } else { %>
                                <p>No previous tickets.</p>
                                <% } %>
            </ul>
        </div>
        <!-- <div class="chat-section" style="flex: 1; padding: 20px;">
            <h2>Chat</h2>
            <div id="chat-messages" style="max-height: 300px; overflow-y: scroll;">
                <!-- Chat messages will be displayed here --> 
          <!--  </div>
            <form  id="chatForm">
                <label for="ticketId">Select Ticket by ID:</label>
                <select name="ticketId" name="ticketId">
                    <% if (previousTickets.length > 0) { %>
                        <% previousTickets.forEach(ticket => { %>
                            <option value="<%= ticket.ticketId %>">
                                <%= ticket.ticketId %>
                            </option>
                        <% }); %>
                    <% } %>
                </select>
                <input type="text" id="messageInput" placeholder="Chat..." required>
                <button type="submit">Send</button>
            </form>
            <% if (previousTickets.length === 0) { %>
                <p>No previous tickets.</p>
            <% } %>
        </div>
         -->
        
    <div> <ul id="messages"></ul>
        <form id="form" action="">
          <input id="input" autocomplete="off" /><button>Send</button>
        </form>
    </div>    
            
    <!--                           Generate the ticket 
     -->
    <div style="flex: 1; padding: 20px; ">
            <H2>Generate New Ticket:</H2>
            <img src="gen.png" alt="Ticket Generation Image" style="max-width: 100%;">
            <form id="newTicketForm" action="/newTicketForm" method="post">
                <label for="categories">Problem Category:</label>
                <select class="form-select" name="categories" required>
                    <option value="" disabled selected>Select a category</option>
                    <option value="one">One</option>
                    <option value="two">Two</option>
                    <option value="three">Three</option>
                </select>

                <label for="problemDescription">Problem Description:</label>
                <textarea class="form-control" name="problemDescription" rows="4" required></textarea>

                <button type="submit" class="submit-button">Submit</button>
            </form>

        </div>
        
    </div>

    <%- include('components/footer', { currentYear: new Date().getFullYear() }) %>